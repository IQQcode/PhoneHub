### ORM框架选型

**主流ORM框架对比：**

| 对比项           | SpringData Jpa                                  | MyBatis                                 |
| ---------------- | ----------------------------------------------- | --------------------------------------- |
| **单表操作**     | 只需要继承，代码量少。支持方法名用关键字生成SQL | 编写SQL语句                             |
| **多表关联查询** | 动态SQL使用不方便，SQL和代码耦合在一起          | 直观方便的动态SQL                       |
| **自定义SQL**    | SQL写在注解内，动态SQL略微繁琐                  | SQL写在XML中，独立管理，动态SQL容易书写 |
| **应用**         | 中小型个人项目                                  | 大型项目                                |

![image-20200904151111100](4.后端构建.assets/image-20200904151111100.png)

> [Spring Data Jpa](https://spring.io/projects/spring-data-jpa)

**JPQL：**面向对象的查询语言，非面向数据库的查询语句来查询数据，**避免SQL语句紧密耦合**

### 选择Jap的优势

【Spring Data Jpa】

**全自动化的ORM框架**。**底层实现为Hibernate，可以根据实体类的字段信息，自动生成表，便捷的完成数据库表到Java实体类的映射**。**不用写接口和实现类，不用写SQL语句。类和表直接关联，不用考虑结果集的映射**

【MyBatis】

MyBatis为半自动化ORM框架，根据SQL语句生成查询的结果集，结果集和实体类的对应。

但是，Spring Data Jpa对动态SQL的支持没有MyBatis好用，使用比较复杂

#### 动态SQL

Mybatis应用中，SQL映射通常位于XML文件内，在执行前需要将XML中的映射转换为最终要执行的SQL。在转换中是否可以根据输入动态的处理SQL？这就是动态SQL

查询条件很复杂或者查询条件不确定，单一的SQL语句无法完成查询。例如查询：

【根据传入参数条件查询】user查询的条件：有可能有用户名，有可能有性别，也有可能有地址，还有可能是都有

MyBatis的动态SQL语句只是针对查询而言：

类型主要有三种：

- **条件判断**
- **内容处理**
- **循环处理**

![image_5c564f01_19a3](https://img2018.cnblogs.com/blog/897393/201902/897393-20190203101658012-590767167.png)

### Jpa常用注解



